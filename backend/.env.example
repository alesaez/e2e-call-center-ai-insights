# Backend Environment Variables for Local Development
# Copy this file to .env and fill in your values

# Microsoft Entra ID Configuration
# These should match your backend app registration in Azure Portal
ENTRA_TENANT_ID=your-tenant-id-here
ENTRA_CLIENT_ID=your-backend-client-id-here

# CORS Configuration
# Add your frontend URLs (comma-separated for production)
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:5173"]

# Copilot Studio Configuration (Optional - for CS Chatbot integration)
# Get these values from your Copilot Studio agent in Power Platform
# Direct Connect URL (optional, leave empty to use default)
COPILOT_STUDIO_DIRECT_CONNECT_URL=
# Power Platform environment ID where your Copilot Studio agent is deployed
COPILOT_STUDIO_ENVIRONMENT_ID=your-environment-id-here
# Schema name of your Copilot Studio agent (e.g., crb64_myAgent)
COPILOT_STUDIO_SCHEMA_NAME=your-agent-schema-name-here
# Microsoft Entra ID tenant ID (usually same as ENTRA_TENANT_ID above)
COPILOT_STUDIO_TENANT_ID=your-tenant-id-here
# App registration client ID for Copilot Studio access (can use same as ENTRA_CLIENT_ID)
COPILOT_STUDIO_APP_CLIENT_ID=your-backend-client-id-here
# App registration client secret (required for On-Behalf-Of flow)
COPILOT_STUDIO_APP_CLIENT_SECRET=your-client-secret-value-here

# Azure Cosmos DB Configuration (Optional - for chat history persistence)
# NEW: Two-container architecture for optimal performance and scalability

# Authentication Options:
# 1. For localhost development with DefaultAzureCredential (recommended):
#    Use your Azure account credentials (az login) - more secure than connection strings
COSMOS_DB_ACCOUNT_URI=https://your-cosmosdb-account.documents.azure.com:443/

# 2. For production or when DefaultAzureCredential is not available:
#    Connection string for Azure Cosmos DB account
COSMOS_DB_CONNECTION_STRING=AccountEndpoint=https://your-account.documents.azure.com:443/;AccountKey=your-key-here;

# Database and Container Configuration:
# Database name for chat history (will be created if not exists)
COSMOS_DB_DATABASE_NAME=ContosoSuites
# Sessions container - partitioned by userId for efficient user queries
COSMOS_DB_SESSIONS_CONTAINER=Sessions
# Messages container - partitioned by sessionId for optimal message retrieval
COSMOS_DB_MESSAGES_CONTAINER=Messages

# Schema Information:
# Sessions Container Schema:
# - Partition Key: userId
# - Documents: Chat sessions with metadata (title, createdAt, lastActiveAt, model, etc.)
# 
# Messages Container Schema:
# - Partition Key: sessionId  
# - Documents: Individual messages with role, content, tokens, attachments, grounding, etc.

# =============================================================================
# ðŸ”§ DEBUGGING & LOGGING
# =============================================================================

# Azure SDK Verbose Logging (for development debugging only)
# Set to 'true' to enable detailed Azure SDK HTTP logging
# WARNING: This will log HTTP requests/responses and may expose sensitive data
# AZURE_SDK_VERBOSE_LOGGING=false
