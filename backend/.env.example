# Backend Environment Variables for Local Development
# Copy this file to .env and fill in your values

# Microsoft Entra ID Configuration
# These should match your backend app registration in Azure Portal
ENTRA_TENANT_ID=your-tenant-id-here
ENTRA_CLIENT_ID=your-backend-client-id-here

# CORS Configuration
# Add your frontend URLs (comma-separated for production)
ALLOWED_ORIGINS=["http://localhost:3000", "http://localhost:5173"]

# Copilot Studio Configuration (Optional - for CS Chatbot integration)
# Get these values from your Copilot Studio agent in Power Platform
# Direct Connect URL (optional, leave empty to use default)
COPILOT_STUDIO_DIRECT_CONNECT_URL=
# Power Platform environment ID where your Copilot Studio agent is deployed
COPILOT_STUDIO_ENVIRONMENT_ID=your-environment-id-here
# Schema name of your Copilot Studio agent (e.g., crb64_myAgent)
COPILOT_STUDIO_SCHEMA_NAME=your-agent-schema-name-here
# Microsoft Entra ID tenant ID (usually same as ENTRA_TENANT_ID above)
COPILOT_STUDIO_TENANT_ID=your-tenant-id-here
# App registration client ID for Copilot Studio access (can use same as ENTRA_CLIENT_ID)
COPILOT_STUDIO_APP_CLIENT_ID=your-backend-client-id-here
# App registration client secret (required for On-Behalf-Of flow)
COPILOT_STUDIO_APP_CLIENT_SECRET=your-client-secret-value-here

# Azure Cosmos DB Configuration (Optional - for chat history persistence)
# NEW: Two-container architecture for optimal performance and scalability

# Azure Cosmos DB Configuration (Optional - for chat history persistence)
# Authentication: Uses DefaultAzureCredential for localhost and ManagedIdentityCredential for Azure Container Apps
# 
# Cosmos DB account URI (required)
COSMOS_DB_ACCOUNT_URI=https://your-cosmosdb-account.documents.azure.com:443/

# Database and Container Configuration:
# Database name for chat history (will be created if not exists)
COSMOS_DB_DATABASE_NAME=ContosoSuites
# Sessions container - partitioned by userId for efficient user queries
COSMOS_DB_SESSIONS_CONTAINER=Sessions
# Messages container - partitioned by sessionId for optimal message retrieval
COSMOS_DB_MESSAGES_CONTAINER=Messages

# Schema Information:
# Sessions Container Schema:
# - Partition Key: userId
# - Documents: Chat sessions with metadata (title, createdAt, lastActiveAt, model, etc.)
# 
# Messages Container Schema:
# - Partition Key: sessionId  
# - Documents: Individual messages with role, content, tokens, attachments, grounding, etc.

# Azure AI Foundry Configuration (Optional - for AI Foundry Chatbot integration)
# Get these values from your AI Foundry project in Azure AI Studio
# AI Foundry project endpoint (e.g., https://xxx-aifoundry.services.ai.azure.com/api/projects/YourProject)
AI_FOUNDRY_ENDPOINT=https://your-aifoundry.services.ai.azure.com/api/projects/YourProject
# AI Foundry agent ID (e.g., asst_xxxxxxxxxxxxx)
AI_FOUNDRY_AGENT_ID=asst_xxxxxxxxxxxxx
# Microsoft Entra ID tenant ID (usually same as ENTRA_TENANT_ID above)
AI_FOUNDRY_TENANT_ID=your-tenant-id-here
# App registration client ID for AI Foundry access (can use same as ENTRA_CLIENT_ID)
AI_FOUNDRY_APP_CLIENT_ID=your-backend-client-id-here
# App registration client secret (required for On-Behalf-Of flow to Azure AI services)
AI_FOUNDRY_APP_CLIENT_SECRET=your-client-secret-value-here

# Power BI Embedded Configuration (Optional - for Power BI report embedding)
# Uses service principal (app registration) for authentication to Power BI API
# This provides secure, server-side token generation for embedding Power BI reports

# Microsoft Entra ID tenant ID (usually same as ENTRA_TENANT_ID above)
POWERBI_TENANT_ID=your-tenant-id-here
# Service principal client ID (separate app registration with Power BI permissions)
# This app registration needs Power BI Service admin consent for embedding
POWERBI_CLIENT_ID=your-powerbi-service-principal-client-id-here
# Service principal client secret
POWERBI_CLIENT_SECRET=your-powerbi-service-principal-secret-here
# Power BI workspace (group) ID where your report is located
# Get this from Power BI workspace URL or REST API
POWERBI_WORKSPACE_ID=your-workspace-id-here
# Power BI report ID to embed
# Get this from Power BI report URL or REST API
POWERBI_REPORT_ID=your-report-id-here

# =============================================================================
# üéõÔ∏è UI CONFIGURATION
# =============================================================================

# UI Configuration Environment
# Determines which environment settings to use from ui-config.json
# Valid values: dev, staging, prod
UI_CONFIG_ENVIRONMENT=prod

# UI Configuration File: backend/ui-config.json
# 
# The ui-config.json file controls:
#   - Tab visibility (display: true/false)
#   - Service loading (load: true/false)
#   - Tab labels (name, title, subtitle)
#   - Environment-specific overrides
# 
# Edit backend/ui-config.json to customize:
#   - Which tabs appear in the navigation
#   - Tab display names, titles, and subtitles
#   - Different configurations per environment (dev/staging/prod)
#   - Which backend services are loaded
# 
# Example use cases:
#   - Hide Power BI in dev: Set powerbi.overrides.dev.display = false
#   - Custom tab name in prod: Set copilot-studio.overrides.prod.labels.name = "Support Bot"
#   - Disable a service: Set <tab>.load = false (service won't initialize)

# =============================================================================
# üîß DEBUGGING & LOGGING
# =============================================================================

# Azure SDK Verbose Logging (for development debugging only)
# Set to 'true' to enable detailed Azure SDK HTTP logging
# WARNING: This will log HTTP requests/responses and may expose sensitive data
# AZURE_SDK_VERBOSE_LOGGING=false

